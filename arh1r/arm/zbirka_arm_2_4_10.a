main

; r1 - adresa popisa
; r2 - adresa liste prisutnosti
; r0 - student koji je bio na najviše predavanja

        mov     r1, #0x1000
        mov     r2, #0x1800

        mov     sp, #0x10000

        stmfd   sp!, {r1, r2}
        bl      broji
        add     sp, sp, #8

        str     r0, nerd


end_main
        swi     0x123456


broji

; r1 - pokazivač na studente popisa
; r2 - adresa liste prisutnosti
; r3 - na koliko je predavanja bio student koji je bio na najviše predavanja
; r4 - adresa iza adrese zadnjeg studenta iz popisa (na koji pokazuje r1)
; r5 - pojedini student iz popisa r1
; r6 - na koliko je predavanja taj student bio

; r0 (vraćanje) - student koji je bio na najviše predavanja

        stmfd   sp!, {r1, r2, r3, r4, r5, r6, lr}
        ldr     r1, [sp, #28]
        ldr     r2, [sp, #32]
        mov     r3, #0
        mov     r4, r1
        add     r4, r4, #2048

loop
        ldr     r5, [r1], #4        

        ldrb    r6, [r2, r5]    ; podatak o prisutnosti studenta se učita u r6, poveća se za 1 i upiše se u listu prisutnosti
        add     r6, r6, #1
        strb    r6, [r2, r5]

        cmp     r6, r3          ; podatak o prisutnosti studenta se usporedi sa dosad najvećim, ako je još veći onda se obnove r3 i r0
        movgt   r3, r6
        movgt   r0, r5

        cmp     r1, r4
        blt     loop

end_br
        ldmfd   sp!, {r1, r2, r3, r4, r5, r6, lr}
        mov     pc, lr

        
        

        org     0x100
nerd    dw      0


        org     0x1000
popis   dw      0x4c, 0x16, 0x4f, 0x3d, 0x4a, 0x4a, 0xd, 0x2c, 0x50, 0x1c, 0x63, 0x17, 0x63, 0x58, 0x53, 0x1, 0x3, 0x3e, 0x15, 0xa, 0x1a, 0x3e, 0x4a, 0x52, 0x11, 0x52, 0x64, 0x18, 0x52, 0x50, 0x48, 0x3c, 0x10, 0x2c, 0x5, 0x21, 0x5, 0x60, 0x31, 0x40, 0xf, 0x2a, 0x2b, 0x3c, 0x41, 0x3b, 0x30, 0x50, 0x38, 0x46, 0x51, 0x51, 0x58, 0x1b, 0x3, 0x3e, 0x19, 0x1c, 0x5, 0x5d, 0x27, 0x21, 0x2e, 0x11, 0x2a, 0x9, 0x17, 0x25, 0x39, 0x42, 0x12, 0x6, 0x45, 0x63, 0xa, 0x23, 0x49, 0x2e, 0x2e, 0xb, 0x52, 0x35, 0x44, 0x4a, 0x52, 0x15, 0x5, 0x3, 0x3f, 0x2c, 0x50, 0x58, 0x9, 0x50, 0x62, 0xb, 0x57, 0x59, 0x5a, 0x5c, 0x24, 0x1a, 0x1e, 0x4e, 0x45, 0x53, 0x19, 0x11, 0x35, 0xb, 0x9, 0x30, 0x1f, 0x33, 0x11, 0x25, 0x2d, 0x4d, 0x5b, 0x25, 0x5b, 0x28, 0x17, 0x32, 0x2, 0x3, 0x29, 0x21, 0x3b, 0x2, 0x32, 0x21, 0x7, 0x3c, 0x5f, 0x1b, 0x3a, 0xf, 0xb, 0x37, 0x55, 0x24, 0x4f, 0x5b, 0x43, 0x1c, 0x3, 0xa, 0x60, 0x12, 0x38, 0x58, 0x12, 0x2d, 0x0, 0x14, 0x6, 0x24, 0x4c, 0xc, 0x28, 0x25, 0x3f, 0x2c, 0x33, 0x3a, 0x58, 0x20, 0x2e, 0x57, 0x10, 0x32, 0x33, 0x15, 0x27, 0x34, 0x6, 0x2e, 0x2d, 0x42, 0x4e, 0x3, 0x5e, 0x52, 0x63, 0x52, 0x39, 0x30, 0x7, 0x41, 0x47, 0x35, 0x2b, 0x5b, 0x2c, 0xd, 0x9, 0x6, 0x60, 0x7, 0x19, 0x36, 0x4, 0x29, 0x16, 0x4, 0x2b, 0x9, 0x2a, 0x59, 0x32, 0x45, 0xc, 0x1c, 0x48, 0x12, 0x64, 0x38, 0xf, 0xe, 0x2d, 0x3b, 0x38, 0xc, 0x41, 0x4b, 0x39, 0x2c, 0x3f, 0x9, 0x5e, 0x4c, 0x3e, 0x4c, 0x38, 0x32, 0xd, 0xe, 0x3a, 0x33, 0x27, 0x9, 0x49, 0x1a, 0x5d, 0x4d, 0x44, 0x0, 0x4d, 0x12, 0x43, 0x37, 0x0, 0x4a, 0x4f, 0x3a, 0x1, 0x37, 0x51, 0x19, 0x5a, 0x11, 0x38, 0x50, 0x4a, 0x2a, 0x3f, 0x46, 0x19, 0x40, 0xf, 0x53, 0x16, 0x27, 0x1e, 0x16, 0x20, 0x1d, 0x29, 0x1a, 0x61, 0x40, 0x48, 0x5c, 0x37, 0x46, 0x21, 0x1, 0x7, 0x12, 0x5, 0x4c, 0x48, 0x3d, 0x4a, 0x1e, 0x3d, 0x1e, 0x50, 0x21, 0x19, 0x15, 0x8, 0x3b, 0x45, 0xa, 0x4a, 0x44, 0x1d, 0x36, 0x37, 0x28, 0x1a, 0x54, 0x1, 0x39, 0x4f, 0x13, 0x1a, 0x4a, 0x1e, 0x22, 0x1d, 0x3a, 0x2d, 0x59, 0x23, 0x2a, 0x1b, 0x4d, 0x5a, 0x46, 0x29, 0x44, 0x3, 0x53, 0x64, 0x12, 0x20, 0x47, 0x16, 0x50, 0x5d, 0x53, 0xf, 0x2d, 0xc, 0x60, 0x55, 0x12, 0x1a, 0x14, 0x34, 0x49, 0x4d, 0x59, 0x43, 0x4, 0x12, 0x19, 0x5e, 0x2b, 0x4f, 0x35, 0x1f, 0x4e, 0x8, 0x36, 0x4c, 0x38, 0x7, 0x12, 0x52, 0x14, 0x11, 0x47, 0x28, 0x59, 0x4c, 0x35, 0x3f, 0x13, 0xa, 0x3c, 0x52, 0x1f, 0x33, 0x20, 0x7, 0x4e, 0x4d, 0x35, 0x3a, 0x2a, 0x59, 0x28, 0x24, 0x63, 0x18, 0x2d, 0x1e, 0x30, 0x1f, 0x9, 0xe, 0x51, 0x5, 0x24, 0x2a, 0x1f, 0xe, 0x15, 0x50, 0x5d, 0x14, 0x44, 0x21, 0x58, 0x25, 0x18, 0xc, 0x64, 0x44, 0x3b, 0x1d, 0x5c, 0x57, 0x5b, 0x56, 0x26, 0x4f, 0x5e, 0x34, 0x29, 0x4e, 0x3a, 0x58, 0x41, 0x37, 0x0, 0x54, 0x7, 0x44, 0x20, 0x1f, 0x1, 0x12, 0x35, 0x5e, 0x3a, 0x30, 0x14, 0xa, 0xe, 0x2a, 0x11, 0x58, 0x54, 0x23, 0xb, 0x13, 0x2f, 0x1, 0x5, 0x16, 0x5a, 0x46, 0x46, 0x43, 0x12, 0x9, 0x42, 0xf, 0x3, 0x6, 0x5f, 0x9, 0x57, 0x60, 0x62, 0x4e, 0xd, 0x8, 0x3d, 0x6, 0x8, 0x3b, 0x51, 0x9, 0x18, 0xf, 0x3c, 0x21, 0x3f, 0x5c, 0x63, 0x4f, 0x23, 0x5d, 0x3c, 0x55, 0x4c, 0x5a, 0x15, 0x2, 0x60, 0x4f, 0x23, 0x4a, 0x59, 0x52, 0x50

        org     0x1800
l_pr    db      0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0